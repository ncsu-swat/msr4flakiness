@Test
public void blockHelpersTakePrecedenceOverSameNamedContextProperties() throws IOException {
    Hash helpers = $("goodbye", new Helper<Map<String, Object>>() {

        @Override
        public Object apply(final Map<String, Object> context, final Options options) throws IOException {
            return context.get("goodbye").toString().toUpperCase() + options.fn(context);
        }
    }, "cruel", new Helper<String>() {

        @Override
        public Object apply(final String world, final Options options) throws IOException {
            return "cruel " + world.toUpperCase();
        }
    });
    shouldCompileTo("{{#goodbye}} {{cruel world}}{{/goodbye}}", "{goodbye: goodbye, world: world}", helpers, "GOODBYE cruel WORLD");
}
